<!DOCTYPE html>
<html>
    <head>
        <title>Perspective 2.0</title>
        <link rel="stylesheet" href="./index.css">
        <link rel="stylesheet" href="./sizeAdjust.css">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet" >
    </head>
    <body>
        <div role="container" class="container">
            <div class="setup">
                <div class="size-change">
                    <button class="text decrease" onclick="decreaseSize()">
                        <div class="icon decrease-size">A</div>
                        <span class="tooltiptext decrease">make text smaller</span>
                    </button>
                    <button class="text increase" onclick="increaseSize()">
                        <div class="icon increase-size">A</div>
                        <span class="tooltiptext increase">make text bigger</span>
                    </button>
                </div>
                <div class="theme-switch-wrapper">
                    <label class="theme-switch" for="checkbox">
                        <input type="checkbox" id="checkbox"/>
                        <div class="slider round"></div>
                        <span class="tooltiptext mode">enable dark mode</span>
                    </label>
                </div>
            </div>
            <div class="header" role="header">
                <img  class="logo"  tabindex= "0" alt="Perspectives logo" src="https://res.cloudinary.com/dfulxq7so/image/upload/v1615933174/PerspectiveLogo_c61yxb.svg" />
            </div>
            <div class="subtitle" tabindex= "0"  role="text" aria-label="A look at bias in the workplace">
                A look at bias in the workplace
            </div>
            <a href="./accessibility/reader.html" tabindex= "0"  class="start-button"  role="link">
                <img class="startButton-img" alt="Press to start the experience" src="https://res.cloudinary.com/dfulxq7so/image/upload/v1614019871/Group_65_yjvasr.png" />
            </a>
            <img id="polygon" aria-hidden="true"  src="https://res.cloudinary.com/dfulxq7so/image/upload/v1614210343/Polygon_8.1_p0fjwm.svg" /> 
            <img id="rect"  aria-hidden="true"  src="https://res.cloudinary.com/dfulxq7so/image/upload/v1614210382/Rectangle_99.1_sjioka.svg" />
            <img id="ellipse" aria-hidden="true"  src="https://res.cloudinary.com/dfulxq7so/image/upload/v1614210277/Ellipse_26_ymtmeq.svg" />
            <img id="group1" aria-hidden="true"  src="https://res.cloudinary.com/dfulxq7so/image/upload/v1614210431/Group_53.1_wqvelu.svg" />
            <img id="group3" aria-hidden="true"  src="https://res.cloudinary.com/dfulxq7so/image/upload/v1614210143/Group_105_du9lra.svg" />
        </div>
        <script>
            let sizeElastic = parseInt(localStorage.getItem('sizeElastic')) || 0
            const container = document.getElementsByClassName('container')[0]
            const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]')
            const startButton = document.getElementsByClassName("start-button")[0]
            const startButtonImg = document.getElementsByClassName("startButton-img")[0]
            const subtitle = document.getElementsByClassName('subtitle')[0]
            const logo = document.getElementsByClassName('logo')[0]
            const darkEnable = document.getElementsByClassName('dark-enable')[0]
            const toolTipTextMode = document.getElementsByClassName('tooltiptext mode')[0]
            const sizeChange = document.getElementsByClassName('size-change')[0] 
            const decreaseSizeIcon = document.getElementsByClassName('icon decrease-size')[0] 
            const increaseSizeIcon = document.getElementsByClassName('icon increase-size')[0] 
            const checkbox = document.getElementById('checkbox')

            const curMode = sessionStorage.getItem('data-theme')
            if (curMode === null){
                sessionStorage.setItem('data-theme', 'light')
            } else if (curMode === "dark"){
                setThemeDark()
            }

            function handleMouseOver(){
                if (sessionStorage.getItem('data-theme') && sessionStorage.getItem('data-theme') === "dark"){
                    startButtonImg.src = "https://res.cloudinary.com/dfulxq7so/image/upload/v1618941738/start-btn-hover-dark_nvvioa.svg"
                } else {
                    startButtonImg.src = "https://res.cloudinary.com/dfulxq7so/image/upload/v1615932581/startButton-hovered_djktcj.svg"
                }
            }
            function handleMouseOut(){
                if (sessionStorage.getItem('data-theme') && sessionStorage.getItem('data-theme') === "dark"){
                    startButtonImg.src = "https://res.cloudinary.com/dfulxq7so/image/upload/v1617745715/Component_5_3-dark_xwecoe.svg"
                } else {
                    startButtonImg.src = "https://res.cloudinary.com/dfulxq7so/image/upload/v1615932589/startButton-default_aiknwm.svg"
                }
            }

            startButton.addEventListener('mouseover', handleMouseOver)
            startButton.addEventListener('mouseout', handleMouseOut)

            function playRandom(){
                let audio = new Audio('./asset/VOfiles/Pluckandplay - Kwon.mp3');
                audio.autoplay = true
            }

            function setThemeDark(){
                container.style.backgroundColor = '#000000'
                ellipse.src="https://res.cloudinary.com/dfulxq7so/image/upload/v1618874636/ellipse-green-darkkk_srjznt.svg"
                polygon.src="https://res.cloudinary.com/dfulxq7so/image/upload/v1618876740/Polygon_8-darkkkkkkkkk_fwzjfd.svg"
                rect.src= "https://res.cloudinary.com/dfulxq7so/image/upload/v1617745715/Rectangle_99-dark_pjux5g.svg"
                group1.src = "https://res.cloudinary.com/dfulxq7so/image/upload/v1618876667/Group_53-darkkkk_p3tw4l.svg"
                group3.src = "https://res.cloudinary.com/dfulxq7so/image/upload/v1618876600/Group_105-darkkkk_upljhd.svg"
                startButtonImg.src="https://res.cloudinary.com/dfulxq7so/image/upload/v1618876527/Component_5_3_ucuivy.svg"
                subtitle.style.color = '#FFFFFF'
                logo.src="https://res.cloudinary.com/dfulxq7so/image/upload/v1618931513/Perspectives-logo-darkkk_iup0gd.svg"
                sizeChange.style.backgroundColor = '#015EF4'
                decreaseSizeIcon.style.color = increaseSizeIcon.style.color = '#FFFFFF'
                toolTipTextMode.innerHTML = 'enable light mode'
                checkbox.checked = true
            }



            function switchTheme(e){
                if (e.target.checked){
                    sessionStorage.setItem('data-theme', 'dark')
                    setThemeDark()
                } else {
                    sessionStorage.setItem('data-theme', 'light')
                    container.style.backgroundColor = '#D9ECEC'
                    ellipse.src= "https://res.cloudinary.com/dfulxq7so/image/upload/v1614210277/Ellipse_26_ymtmeq.svg"
                    polygon.src= "https://res.cloudinary.com/dfulxq7so/image/upload/v1614210343/Polygon_8.1_p0fjwm.svg"
                    rect.src= "https://res.cloudinary.com/dfulxq7so/image/upload/v1614210382/Rectangle_99.1_sjioka.svg"
                    group1.src = "https://res.cloudinary.com/dfulxq7so/image/upload/v1614210431/Group_53.1_wqvelu.svg"
                    group3.src = "https://res.cloudinary.com/dfulxq7so/image/upload/v1614210143/Group_105_du9lra.svg"
                    startButtonImg.src="https://res.cloudinary.com/dfulxq7so/image/upload/v1614019871/Group_65_yjvasr.png"
                    subtitle.style.color = '#000000'
                    logo.src= "https://res.cloudinary.com/dfulxq7so/image/upload/v1615933174/PerspectiveLogo_c61yxb.svg"
                    sizeChange.style.backgroundColor = '#A9D3D0'
                    decreaseSizeIcon.style.color = increaseSizeIcon.style.color = '#000000'
                    toolTipTextMode.innerHTML = 'enable dark mode'
                }
            }

            toggleSwitch.addEventListener('change', switchTheme, false)

            //set sizes
            subtitle.style.fontSize = `${36 + sizeElastic}px`

            function updateSize(){
                if (sizeElastic > -35 && sizeElastic < 50){
                    subtitle.style.fontSize = `${36 + sizeElastic}px`
                }
                localStorage.setItem('sizeElastic', sizeElastic)
            }

            function increaseSize(){
                sizeElastic += 1
                updateSize()
            }
            function decreaseSize(){
                sizeElastic -= 1
                updateSize()
            }
        </script>
    </body>
</html>